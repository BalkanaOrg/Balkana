@model Balkana.Models.Article.ArticleFormModel

@{
    ViewData["Title"] = "Edit Article";
}

<h2 class="mb-4">Edit Article</h2>

<form asp-action="Edit" method="post" enctype="multipart/form-data">
    <input type="hidden" asp-for="ThumbnailUrl" />

    <div class="mb-3">
        <label asp-for="Title" class="form-label"></label>
        <input asp-for="Title" class="form-control" />
        <span asp-validation-for="Title" class="text-danger"></span>
    </div>

    <div class="mb-3">
        <label asp-for="File"></label>
        <input asp-for="File" type="file" class="form-control" />
    </div>

    <div class="mb-3">
        <label asp-for="Content" class="form-label"></label>
        <textarea asp-for="Content" id="editor" class="form-control">@Model.Content</textarea>
        <span asp-validation-for="Content" class="text-danger"></span>
    </div>

    <button type="submit" class="btn btn-success">Update</button>
</form>

@section Scripts {
    <script src="https://cdn.ckeditor.com/ckeditor5/41.3.1/super-build/ckeditor.js"></script>
    <script>
        CKEDITOR.ClassicEditor
            .create(document.querySelector('#editor'), {
                simpleUpload: {
                    uploadUrl: '/file/upload'
                },
                toolbar: [
                    'heading', '|',
                    'bold', 'italic', 'link', '|',
                    'bulletedList', 'numberedList', '|',
                    'blockQuote', 'undo', 'redo', '|',
                    'uploadImage', 'mediaEmbed'
                ],
                removePlugins: [
                    // Collaboration (already removed)
                    'RealTimeCollaborativeComments',
                    'RealTimeCollaborativeTrackChanges',
                    'RealTimeCollaborativeRevisionHistory',
                    'PresenceList',
                    'Comments',
                    'TrackChanges',
                    'TrackChangesData',
                    'RevisionHistory',

                    // Premium plugins throwing license errors
                    'MultiLevelList',
                    'TableOfContents',
                    'FormatPainter',
                    'PasteFromOfficeEnhanced',

                    // Other non-essential
                    'Pagination',
                    'WProofreader',
                    'MathType',
                    'CaseChange',
                    'SlashCommand',
                    'Template',
                    'DocumentOutline',
                    'AIAssistant'
                ]
            })
            .then(editor => console.log('Editor ready ✅', editor))
            .catch(error => console.error('Editor init error ❌:', error));
    </script>
}
