<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    
    <!-- Primary Meta Tags -->
    @{
        // Build title - don't add "- Balkana" if title already contains it
        var pageTitle = ViewData["Title"] as string;
        var fullTitle = pageTitle;
        if (!string.IsNullOrEmpty(pageTitle))
        {
            // If title doesn't already contain "Balkana", add it
            if (!pageTitle.Contains("Balkana", StringComparison.OrdinalIgnoreCase))
            {
                fullTitle = $"{pageTitle} - Balkana";
            }
        }
        else
        {
            fullTitle = "Balkana";
        }
    }
    <title>@fullTitle</title>
    <meta name="title" content="@fullTitle" />
    <meta name="description" content="@(ViewData["Description"] ?? "Balkana is a premier esports tournament organizer in the Balkans, hosting competitive events for Counter-Strike, League of Legends, Valorant, and more. Join the Balkan Championship community!")" />
    <meta name="keywords" content="@(ViewData["Keywords"] ?? "Balkana, esports, gaming, tournament, Counter-Strike, League of Legends, Valorant, Fortnite, Balkan Championship, esports tournament, competitive gaming, Bulgaria, Balkans")" />
    <meta name="author" content="Balkana" />
    <meta name="robots" content="index, follow" />
    <meta name="language" content="English" />
    <meta name="revisit-after" content="7 days" />
    <meta name="theme-color" content="#1a1a2e" />
    
    <!-- Canonical URL -->
    @{
        var baseUrl = Context.Request.Scheme + "://" + Context.Request.Host;
        var canonicalUrl = baseUrl + Context.Request.Path + Context.Request.QueryString;
        
        // Get page-specific image or use default
        var ogImage = ViewData["Image"] as string ?? ViewData["OgImage"] as string;
        if (!string.IsNullOrEmpty(ogImage))
        {
            // Ensure absolute URL
            if (!ogImage.StartsWith("http"))
            {
                ogImage = ogImage.StartsWith("/") ? baseUrl + ogImage : baseUrl + "/" + ogImage;
            }
        }
        else
        {
            ogImage = baseUrl + "/Balkana.png";
        }
    }
    <link rel="canonical" href="@canonicalUrl" />
    
    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website" />
    <meta property="og:url" content="@canonicalUrl" />
    <meta property="og:title" content="@fullTitle" />
    <meta property="og:description" content="@(ViewData["Description"] ?? "Balkana is a premier esports tournament organizer in the Balkans, hosting competitive events for Counter-Strike, League of Legends, Valorant, and more.")" />
    <meta property="og:image" content="@ogImage" />
    <meta property="og:site_name" content="Balkana" />
    <meta property="og:locale" content="en_US" />
    
    <!-- Twitter Card -->
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:url" content="@canonicalUrl" />
    <meta name="twitter:title" content="@fullTitle" />
    <meta name="twitter:description" content="@(ViewData["Description"] ?? "Balkana is a premier esports tournament organizer in the Balkans, hosting competitive events for Counter-Strike, League of Legends, Valorant, and more.")" />
    <meta name="twitter:image" content="@ogImage" />
    <meta name="twitter:site" content="@@BalkanaOrg" />
    <meta name="twitter:creator" content="@@BalkanaOrg" />
    
    <!-- Favicon -->
    <link rel="icon" type="image/x-icon" href="~/favicon.ico" />
    <link rel="apple-touch-icon" sizes="180x180" href="~/favicon.ico" />
    
    <!-- Preconnect for Performance -->
    <link rel="preconnect" href="https://cdn-uicons.flaticon.com" />
    <link rel="preconnect" href="https://cdnjs.cloudflare.com" />
    <link rel="preconnect" href="https://cdn.jsdelivr.net" />
    <link rel="dns-prefetch" href="https://code.jquery.com" />
    
    <!-- Structured Data (JSON-LD) -->
    <script type="application/ld+json">
    {
        "@@context": "https://schema.org",
        "@@type": "Organization",
        "name": "Balkana",
        "alternateName": "BalkanaOrg",
        "url": "@baseUrl",
        "logo": "@(baseUrl)/Balkana.png",
        "description": "Premier esports tournament organizer in the Balkans, hosting competitive events for Counter-Strike, League of Legends, Valorant, and more.",
        "address": {
            "@@type": "PostalAddress",
            "addressLocality": "Sofia",
            "addressCountry": "BG"
        },
        "contactPoint": {
            "@@type": "ContactPoint",
            "email": "promotions@balkana.org",
            "contactType": "Customer Service"
        },
        "sameAs": [
            "https://www.instagram.com/balkanaorg/",
            "https://www.tiktok.com/@@balkanaorg",
            "https://www.twitch.tv/balkanaorg",
            "https://www.youtube.com/@@BalkanaOrg",
            "https://discord.gg/balkana",
            "https://www.linkedin.com/company/balkana",
            "https://x.com/BalkanaOrg",
            "https://steamcommunity.com/groups/balkana"
        ]
    }
    </script>
    
    <!-- CSS -->
    <link rel="stylesheet" href="~/lib/bootstrap/dist/css/bootstrap.min.css" />
    @* <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/jquery-bracket/0.11.1/jquery.bracket.min.css" /> *@
    <link rel="stylesheet" href="~/css/site.css" asp-append-version="true" />
    <link rel="stylesheet" href="~/Balkana.styles.css" asp-append-version="true" />
    <link rel='stylesheet' href='https://cdn-uicons.flaticon.com/2.6.0/uicons-brands/css/uicons-brands.css'>
    <link rel='stylesheet' href='https://cdn-uicons.flaticon.com/2.6.0/uicons-regular-rounded/css/uicons-regular-rounded.css'>
    <link rel='stylesheet' href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">

    <!-- jQuery first -->
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
    
    <!-- Select2 -->
    <link href="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/css/select2.min.css" rel="stylesheet" />
    <script src="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/js/select2.min.js"></script>

    <!-- Plugin after jQuery -->
    @* <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-bracket/0.11.1/jquery.bracket.min.js"></script> *@
    @* <link rel="stylesheet" href="https://unpkg.com/brackets-viewer/dist/brackets-viewer.min.css" />
    <script src="https://unpkg.com/brackets-viewer/dist/brackets-viewer.min.js"></script> *@

    <!-- Bootstrap JS -->
    <script src="~/lib/bootstrap/dist/js/bootstrap.bundle.min.js"></script>

    <!-- Your custom scripts last -->
    <script src="~/js/script.js"></script>
</head>
<body>
    <!-- Mobile Menu Toggle Button -->
    <button type="button" class="mobile-menu-btn" id="mobileMenuBtn" aria-label="Toggle navigation" aria-expanded="false">
        <span></span>
        <span></span>
        <span></span>
    </button>
    
    <!-- Mobile Overlay -->
    <div class="mobile-overlay" id="mobileOverlay"></div>
    
    <!-- Left Sidebar Navigation -->
    <nav class="top-navbar" id="topNavbar">
        <div class="navbar-container">
            <!-- Logo at top with animation -->
            <div class="navbar-logo">
                <a asp-controller="Home" asp-action="Index" aria-label="Balkana Home">
                    <img src="~/Balkana.png" alt="Balkana - Logo" width="120" height="120">
                </a>
            </div>

            <!-- Vertical navigation links -->
            <div class="nav-links">
                <a asp-controller="Home" asp-action="Index" class="nav-link active" data-page="home">
                    <i class="fi fi-rr-home"></i>
                    <span>Home</span>
                </a>
                <a asp-controller="Tournaments" asp-action="Index" class="nav-link">
                    <i class="fi fi-rr-trophy"></i>
                    <span>Tournaments</span>
                </a>
                <a asp-controller="Article" asp-action="Index" class="nav-link">
                    <i class="fi fi-rr-newspaper"></i>
                    <span>News</span>
                </a>
                <a asp-controller="Store" asp-action="Index" class="nav-link">
                    <i class="fi fi-rr-shopping-cart"></i>
                    <span>Store</span>
                </a>
                <a href="#about" class="nav-link" data-page="about">
                    <i class="fi fi-rr-info"></i>
                    <span>About</span>
                </a>

                <!-- Author/Editor Navigation Section -->
                @if (User.IsInRole("Author") || User.IsInRole("Editor"))
                {
                    <div class="dropdown desktop-only-dropdown">
                        <button class="dropdown-btn">
                            <i class="fi fi-rr-pen-nib"></i>
                            <span>Author</span>
                        </button>
                        <div class="dropdown-content">
                            <a asp-controller="Article" asp-action="Create">
                                <i class="fi fi-rr-edit"></i>
                                Write Article
                            </a>
                            <a asp-controller="Article" asp-action="MyArticles">
                                <i class="fi fi-rr-document"></i>
                                My Articles
                            </a>
                            @if (User.IsInRole("Editor"))
                            {
                                <a asp-controller="Article" asp-action="Drafts">
                                    <i class="fi fi-rr-clock"></i>
                                    Drafts
                                </a>
                            }
                        </div>
                    </div>

                    <!-- Mobile access to author links -->
                    <a asp-controller="Article" asp-action="Create" class="nav-link mobile-only-link" data-page="article-create">
                        <i class="fi fi-rr-edit"></i>
                        <span>Write Article</span>
                    </a>
                    <a asp-controller="Article" asp-action="MyArticles" class="nav-link mobile-only-link" data-page="my-articles">
                        <i class="fi fi-rr-document"></i>
                        <span>My Articles</span>
                    </a>
                    @if (User.IsInRole("Editor"))
                    {
                        <a asp-controller="Article" asp-action="Drafts" class="nav-link mobile-only-link" data-page="drafts">
                            <i class="fi fi-rr-clock"></i>
                            <span>Drafts</span>
                        </a>
                    }
                }

                <!-- Administrator Navigation Section -->
                @if (User.IsInRole("Administrator"))
                {
                    <div class="dropdown desktop-only-dropdown">
                        <button class="dropdown-btn">
                            <i class="fi fi-rr-settings"></i>
                            <span>Admin</span>
                        </button>
                        <div class="dropdown-content">
                            <a asp-area="Admin" asp-controller="Admin" asp-action="Index">
                                <i class="fi fi-rr-apps"></i>
                                Dashboard
                            </a>
                            <a asp-area="Players" asp-controller="Admin" asp-action="Index">
                                <i class="fi fi-rr-users-alt"></i>
                                Players
                            </a>
                        </div>
                    </div>

                    <!-- Mobile access to admin links -->
                    <a asp-area="Admin" asp-controller="Admin" asp-action="Index" class="nav-link mobile-only-link" data-page="admin-home">
                        <i class="fi fi-rr-apps"></i>
                        <span>Admin</span>
                    </a>
                    <a asp-area="Admin" asp-controller="Players" asp-action="Index" class="nav-link mobile-only-link" data-page="admin-players">
                        <i class="fi fi-rr-users-alt"></i>
                        <span>Players</span>
                    </a>
                }

                <!-- Mobile-only nav links (shown instead of dropdown on mobile) -->
                <a href="#" class="nav-link mobile-only-link" data-page="fantasy">
                    <i class="fi fi-rr-gamepad"></i>
                    <span>Fantasy</span>
                </a>
                <a asp-controller="Teams" asp-action="Index" asp-route-game="Counter-Strike" class="nav-link mobile-only-link" data-page="ranking">
                    <i class="fi fi-rr-star"></i>
                    <span>Rankings</span>
                </a>
                <a href="#" class="nav-link mobile-only-link" data-page="schedule">
                    <i class="fi fi-rr-calendar"></i>
                    <span>Schedule</span>
                </a>
                <a href="#" class="nav-link mobile-only-link" data-page="festival">
                    <i class="fi fi-rr-party-horn"></i>
                    <span>Festival</span>
                </a>
                <a href="#" class="nav-link mobile-only-link" data-page="gallery">
                    <i class="fi fi-rr-camera"></i>
                    <span>Gallery</span>
                </a>

                <!-- Dropdown Menu (desktop only) -->
                <div class="dropdown desktop-only-dropdown">
                    <button class="dropdown-btn">
                        <i class="fi fi-rr-menu-dots"></i>
                        <span>More</span>
                    </button>
                    <div class="dropdown-content">
                        <a href="#" data-page="fantasy">
                            <i class="fi fi-rr-gamepad"></i>
                            Fantasy
                        </a>
                        <a asp-controller="Teams" asp-action="Index" asp-route-game="Counter-Strike" data-page="ranking">
                            <i class="fi fi-rr-star"></i>
                            Rankings
                        </a>
                        <a href="#" data-page="schedule">
                            <i class="fi fi-rr-calendar"></i>
                            Schedule
                        </a>
                        <a href="#" data-page="festival">
                            <i class="fi fi-rr-party-horn"></i>
                            Festival
                        </a>
                        <a href="#" data-page="gallery">
                            <i class="fi fi-rr-camera"></i>
                            Gallery
                        </a>
                    </div>
                </div>
            </div>

            <!-- Bottom user actions -->
            <div class="nav-actions">
                <div class="language-selector">
                    <i class="fa fa-bell"></i>
                </div>
                @if (User.Identity.IsAuthenticated)
                {
                    <a asp-controller="Account" asp-action="Profile" class="login-btn profile-link">
                        @await Component.InvokeAsync("UserProfilePicture")
                        <span>Profile</span>
                    </a>
                    <form asp-controller="Account" asp-action="Logout" method="post" class="inline">
                        <button type="submit" class="login-btn">
                            <i class="fi fi-rr-exit"></i>
                            <span>Logout</span>
                        </button>
                    </form>
                }
                else
                {
                    <a asp-controller="Account" asp-action="Login" class="login-btn">
                        <i class="fi fi-rr-user"></i>
                        <span>Login</span>
                    </a>
                }
            </div>
        </div>
    </nav>

    <!-- Main Content -->
    <main class="main-content text-white" id="mainContent">
        @RenderBody()
    </main>

    <!-- Footer -->
    <footer class="footer-blkn" id="about">
        <div class="footer-container">
            <div class="footer-section brand-section">
                <div class="footer-logo">
                    <a asp-controller="Home" asp-action="Index" aria-label="Balkana Home">
                        <img src="~/Balkana.png" alt="Balkana - Balkan Esports Championship Logo" width="150" height="150">
                    </a>
                </div>
                <p class="footer-description">
                    Videbimus invicem in Balcania!
                </p>
                <div class="social-links">
                    <a href="https://www.instagram.com/balkanaorg/" class="social-link instagram" target="_blank" rel="noopener noreferrer" title="Follow Balkana on Instagram">
                        <i class="fi fi-brands-instagram"></i>
                        <span class="sr-only">Instagram</span>
                    </a>
                    <a href="https://www.tiktok.com/\@@balkanaorg" class="social-link tiktok" target="_blank" rel="noopener noreferrer" title="Follow Balkana on TikTok">
                        <i class="fi fi-brands-tik-tok"></i>
                        <span class="sr-only">TikTok</span>
                    </a>
                    <a href="https://www.twitch.tv/balkanaorg" class="social-link twitch" target="_blank" rel="noopener noreferrer" title="Watch Balkana on Twitch">
                        <i class="fi fi-brands-twitch"></i>
                        <span class="sr-only">Twitch</span>
                    </a>
                    <a href="https://www.youtube.com/\@@BalkanaOrg" class="social-link youtube" target="_blank" rel="noopener noreferrer" title="Subscribe to Balkana on YouTube">
                        <i class="fi fi-brands-youtube"></i>
                        <span class="sr-only">YouTube</span>
                    </a>
                    <a href="https://discord.gg/balkana" class="social-link discord" target="_blank" rel="noopener noreferrer" title="Join Balkana Discord Server">
                        <i class="fi fi-brands-discord"></i>
                        <span class="sr-only">Discord</span>
                    </a>
                    <a href="https://www.linkedin.com/company/balkana" class="social-link linkedin" target="_blank" rel="noopener noreferrer" title="Connect with Balkana on LinkedIn">
                        <i class="fi fi-brands-linkedin"></i>
                        <span class="sr-only">LinkedIn</span>
                    </a>
                    <a href="https://x.com/BalkanaOrg" class="social-link twitter" target="_blank" rel="noopener noreferrer" title="Follow Balkana on Twitter/X">
                        <i class="fi fi-brands-twitter-alt"></i>
                        <span class="sr-only">Twitter/X</span>
                    </a>
                    <a href="https://steamcommunity.com/groups/balkana" class="social-link steam" target="_blank" rel="noopener noreferrer" title="Join Balkana Steam Group">
                        <i class="fi fi-brands-steam"></i>
                        <span class="sr-only">Steam</span>
                    </a>
                </div>
            </div>

            <div class="footer-section">
                <h3 class="footer-title">Quick Links</h3>
                <ul class="footer-links">
                    <li><a href="#games">Tournaments</a></li>
                    <li><a href="#ranking">Rankings</a></li>
                    <li><a href="#schedule">Schedule</a></li>
                    <li><a href="#news">News</a></li>
                    <li><a href="#about">About Us</a></li>
                </ul>
            </div>

            <div class="footer-section">
                <h3 class="footer-title">Games</h3>
                <ul class="footer-links">
                    <li><a href="#">League of Legends</a></li>
                    <li><a href="#">Counter-Strike: GO</a></li>
                    <li><a href="#">Valorant</a></li>
                    <li><a href="#">Fortnite</a></li>
                </ul>
            </div>

            <div class="footer-section">
                <h3 class="footer-title">Contact Us</h3>
                <div class="contact-info">
                    <div class="contact-item">
                        <span class="contact-icon"><i class="fi fi-rr-envelope"></i></span>
                        <a href="mailto:promotions@balkana.org">promotions@balkana.org</a>
                    </div>
                    <div class="contact-item">
                        <span class="contact-icon"><i class="fi fi-rr-phone-call"></i></span>
                        <a href="tel:+38970123456">0 88 maikata na Rosen</a>
                    </div>
                    <div class="contact-item">
                        <span class="contact-icon"><i class="fi fi-rr-marker"></i></span>
                        <span>Sofia, Bulgaria</span>
                    </div>
                    <div class="contact-item">
                        <span class="contact-icon"><i class="fi fi-rr-globe"></i></span>
                        <a href="#">www.balkana.org</a>
                    </div>
                </div>
            </div>
        </div>

        <div class="footer-bottom">
            <div class="footer-bottom-container">
                <p>&copy; 2025 Balkan Championship. All rights reserved.</p>
                <div class="footer-bottom-links">
                    <a href="#">Privacy Policy</a>
                    <a href="#">Terms of Service</a>
                    <a href="#">Cookie Policy</a>
                </div>
            </div>
        </div>
    </footer>
    @RenderSection("Scripts", required: false)
    @RenderSection("Styles", required: false)
    <script src="~/js/site.js"></script>
</body>
</html>
