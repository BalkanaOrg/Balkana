@model IEnumerable<TransfersServiceModel>

@foreach (var tr in Model)
{
    <tr onclick="window.location.href='@Url.Action("Details", "Transfers", new { id = tr.Id })'">
        <td>@tr.Id</td>
        <td><img src="@tr.IconUrl" width="30px" height="30px" /></td>
        <td>@tr.PlayerUsername</td>
        <td>@tr.TeamFullName</td>
        <td>
            @tr.StartDate.ToShortDateString()
            @if (tr.EndDate != null)
            {
                <span> - @tr.EndDate?.ToShortDateString()</span>
            }
            else
            {
                <span> - Present</span>
            }
        </td>
        <td>@tr.Status</td>
        <td>@tr.Position</td>

        @* Show edit link for mods & admins *@
        @if (User.IsInRole("Administrator") || User.IsInRole("Moderator"))
        {
            <td>
                <a asp-action="Edit" asp-route-id="@tr.Id" class="btn btn-warning btn-sm">✍ Edit</a>
            </td>
        }

        @* Show delete button only for admins *@
        @if (User.IsInRole("Administrator"))
        {
            <td>
                <form asp-action="Delete" asp-route-id="@tr.Id" method="post"
                      onsubmit="return confirm('Are you sure you want to delete this transfer?');">
                    <button type="submit" class="btn btn-danger btn-sm">🗑 Delete</button>
                </form>
            </td>
        }
    </tr>
}